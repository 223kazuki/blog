---
title: Test post
description: Lorem markdownum virgo non simplex atque, bis placavit, est frondentis aera.
author: Kazuki Tsutsumi
author-email: rixi223.kazuki@gmail.com
author-url: https://twitter.com/goronao
author-github: https://github.com/223kazuki
author-twitter: goronao
author-avatar: /images/anton-avatar.png
location: San Jose, CA, USA
date-created: 2017-09-11
date-modified: 2017-09-11
date-published: 2017-09-11
headline:
in-language: en
keywords: clojure, boot-clj
canonical-url: https://223kazuki.github.io/post1
uuid: 2c71b011-6987-45bf-b342-e27a93ecccd9
tags:
 - clojure
 - boot-clj
---
# 2017/09/11

```
(set-env!
  :source-paths #{"src"}
  :resource-paths #{"resources"}
  :target-path #{"../223kazuki.github.io"}
  :dependencies '[[perun "0.4.2-SNAPSHOT"]
                  [hiccup "1.0.5"]
                  [pandeiro/boot-http "0.6.3-SNAPSHOT"]])

(require '[clojure.string :as str]
         '[io.perun :refer :all]
         '[pandeiro.boot-http :refer [serve]])

(task-options!
  markdown   {:out-dir "./"}
  render     {:out-dir "./"}
  collection {:out-dir "./"}
  static     {:out-dir "./"}
  serve      {:resource-root "./"})

(deftask build
  []
  (comp (global-metadata)
        (markdown)
        (draft)
        (print-meta)
        ;; (slug)
        (ttr)
        (word-count)
        (build-date)
        (gravatar :source-key :author-email :target-key :author-gravatar)
        (render :renderer 'io.github.223kazuki.core/render)
        (collection :renderer 'io.github.223kazuki.index/render :page "index.html")
        ;; (tags :renderer 'io.github.223kazuki.index.tags/render)
        ;; (paginate :renderer 'io.github.223kazuki.index.paginate/render)
        ;; (assortment :renderer 'io.github.223kazuki.index.assortment/render
        ;;             :grouper (fn [entries]
        ;;                        (->> entries
        ;;                             (mapcat (fn [entry]
        ;;                                       (if-let [kws (:keywords entry)]
        ;;                                         (map #(-> [% entry]) (str/split kws #"\s*,\s*"))
        ;;                                         [])))
        ;;                             (reduce (fn [result [kw entry]]
        ;;                                       (let [path (str kw ".html")]
        ;;                                         (-> result
        ;;                                             (update-in [path :entries] conj entry)
        ;;                                             (assoc-in [path :entry :keyword] kw))))
        ;;                                     {}))))
        (static :renderer 'io.github.223kazuki.about/render :page "about.html")
        ;; (inject-scripts :scripts #{"start.js"})
        (sitemap :out-dir "./")
        (rss :description "Hashobject blog" :out-dir "./")
        ;; (atom-feed :filterer :original :out-dir "./")
        (print-meta)
        (target :dir #{"../223kazuki.github.io"})
        (notify)))

(deftask dev
  []
  (comp (watch)
        (build)
        (serve)))
```
